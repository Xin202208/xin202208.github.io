import{d as U,am as W,u as X,k as w,c as Y,K as Z,a as x,o as p,f as d,g as r,n as u,e as c,F as g,l as k,i as s,w as _,q as C,h as B,y as I,E as tt,a9 as et,an as at,ao as ot,t as E,p as st,v as lt,x as nt,aa as ct,_ as rt}from"./index-f56efdbb.js";/* empty css                             */const T=v=>(lt("data-v-06b4cf95"),v=v(),nt(),v),pt={style:{"align-items":"center"}},ut=["onClick"],it={class:"dialog-transition-title"},dt=T(()=>r("p",null,"查看權限申請單",-1)),ht={class:"dialog-form-list"},bt={key:0,class:"dialog-form-button-block"},_t=T(()=>r("h3",null,"審核歷程",-1)),vt=U({__name:"AuthChange",props:{data:{type:Array,default:()=>[]},detail:{type:Array,default:()=>[]},log:{type:Array,default:()=>[]}},emits:["reject","send-params"],setup(v,{emit:S}){const m=v,j=W(),A=X({mob:767,laptop:1399}),f=w(!1),V=w(!0),y=w(!1),l=A.greater("mob"),D=A.greater("laptop"),F=a=>{switch(+a){case 0:return"已核可";case 1:return"待審核";case 2:return"審核中";case 3:return"已撤銷"}},L=Y(()=>{const a=[];let t=[];for(let n=0;n<m.data.length;n++){const o=m.data[n];t.push({label:"單號",content:o.no}),t.push({label:"狀態",content:o.status}),t.push({label:"審核者",content:o.reviewer}),t.push({label:"系統名稱",content:o.systemName}),t.push({label:"申請內容",content:o.content}),t.push({label:"申請日期",content:o.date}),t.push({label:location.pathname==="/setting/system"?"傳遞狀態":"申請說明",content:location.pathname==="/setting/system"?o.params+(o.result===1?" 成功":" 失敗"):o.describe}),(n+1)%7===0&&(a.push(t),t=[])}return t.length>0&&a.push(t),a}),R=(a,t)=>{if(a.content===1?f.value=!0:f.value=!1,t%7!==0)return!1;y.value=!0},M=()=>{y.value=!1},N=[{label:"申請單號",prop:"no",content:"",span:2},{label:"申請人",prop:"user",content:"",span:l.value?0:2},{label:"申請人帳號",prop:"account",content:"",span:l.value?0:2},{label:"申請人電話",prop:"tel",content:"",span:l.value?0:2},{label:"申請日期",prop:"date",content:"",span:l.value?0:2},{label:"申請單位",prop:"applicant",content:"",span:2},{label:"系統名稱",prop:"systemName",content:"",span:2},{label:"申請權限",prop:"auth",content:"",span:2},{label:"申請說明",prop:"describe",content:"",span:2},{label:"目前審核者",prop:"reviewer",content:"",span:2}],O=()=>{S("reject")},q=a=>a.content,z=a=>{const t=/【(.*?)】/,n=a.match(t);if(n){const o=n[1];S("send-params",o)}},K=()=>V.value&&j.path==="/setting/system";return Z(()=>{const a=m.detail[0];for(const t of N)t.content=a[t.prop]}),(a,t)=>{const n=I,o=x("Close"),P=tt,G=ct,H=et,h=at,J=ot;return p(),d(g,null,[r("div",{class:u(["auth-change-table-layout",{"over-mob":c(l)}])},[r("div",{class:u(["auth-change-table-item-block",{"over-mob":c(l)}])},[(p(!0),d(g,null,k(L.value,(i,$)=>(p(),d("div",{key:$,class:u(["auth-change-table-row",{"over-mob":c(l)},{"label-hidden":$>0}])},[(p(!0),d(g,null,k(i,(b,e)=>(p(),d("div",{key:e,class:u(["auth-change-table-item",{"over-mob":c(l)},{"radius-top-custom":e%7===0},{"width-status":e%7===1},{"width-system":e%7===3},{"width-date":e%7===5},{"radius-bottom-custom":e%7===6},{"last-row-custom":e-(i.length-1)>-7},`index${e}`])},[!c(l)||e<=6?(p(),d("div",{key:0,class:u(["auth-change-table-header",{"over-mob":c(l)},`index${e}`])},[r("span",pt,E(b.label),1)],2)):B("",!0),r("div",{class:u(["auth-change-table-content",{"over-mob":c(l)},{"over-laptop":c(D)},`${e%7===1?"status"+b.content:e}`])},[r("p",{class:u([`index${e}`,{"custom-style":e%7===0}]),onClick:Q=>R(i[e+1],e)},E(e%7===1?F(b.content):e%7===6?q(b):b.content),11,ut),e%7===6&&K()?(p(),st(n,{key:0,class:u(["auth-change-table-button",{"over-laptop":c(D)}]),onClick:Q=>z(b.content)},{default:_(()=>[C("重送參數")]),_:2},1032,["class","onClick"])):B("",!0)],2)],2))),128))],2))),128))],2)],2),r("div",{class:u(["dialog-transition",{open:y.value},{"over-mob":c(l)}])},[r("div",it,[dt,s(P,{class:"dialog-icon-close",onClick:M},{default:_(()=>[s(o)]),_:1})]),r("div",ht,[s(H,{column:2,border:""},{default:_(()=>[(p(),d(g,null,k(N,i=>s(G,{key:i.prop,label:i.label,"label-align":"right",span:i.span,width:"100px"},{default:_(()=>[C(E(i.content),1)]),_:2},1032,["label","span"])),64))]),_:1})]),f.value?(p(),d("div",bt,[s(n,{class:"dialog-form-button",onClick:O},{default:_(()=>[C("撤銷")]),_:1})])):B("",!0),_t,s(J,{class:"dialog-table-log",data:m.log,border:"",style:{width:"100%"},"header-cell-class-name":"dialog-table-header"},{default:_(()=>[s(h,{prop:"no",label:"序號",width:"80"}),s(h,{prop:"process",label:"節點名稱",width:"120"}),s(h,{prop:"reviewer",label:"審核人",width:"120"}),s(h,{prop:"finalReviewer",label:"實際處理人",width:"120"}),s(h,{prop:"action",label:"操作",width:"90"}),s(h,{prop:"date",label:"日期",width:"110"}),s(h,{prop:"remark",label:"備註"})]),_:1},8,["data"])],2)],64)}}});const ft=rt(vt,[["__scopeId","data-v-06b4cf95"]]);export{ft as a};
